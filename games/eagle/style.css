/* =========================
   EAGLE AIM - STYLE.CSS (V2.1 - RESTORE)
   ========================= */

body {
    background: #000;
    overflow: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* --- 1. FUNDO GLOBAL & EFEITOS --- */
#global-bg {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    z-index: -1;
    background: radial-gradient(circle at center, #1a1a1a 0%, #000000 100%);
    transition: background 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}
body.game-mode #global-bg {
    background: radial-gradient(circle at center, #facc15 0%, #ca8a04 100%);
}
#splat-layer {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none;
}

/* --- BLOBS/SPLATS --- */
.splat {
    position: absolute; width: 50px; height: 50px;
    background: rgba(0, 0, 0, 0.234);
    transform: translate(-50%, -50%) scale(0);
    animation: splatEnter 0.15s forwards;
    border-radius: 50%;
}
.splat-type-1 { border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; }
.splat-type-2 { border-radius: 64% 36% 27% 73% / 71% 42% 58% 29%; }
.splat-type-3 { border-radius: 43% 57% 62% 38% / 36% 59% 41% 64%; }
.splat-droplet {
    position: absolute; background: rgba(0,0,0,0.4); border-radius: 50%;
    transform: translate(-50%, -50%) scale(0); animation: splatEnter 0.2s forwards;
}
.touch-ripple {
    position: fixed; border: 2px solid rgba(255, 255, 255, 0.8); border-radius: 50%;
    transform: translate(-50%, -50%); pointer-events: none;
    animation: rippleAnim 0.4s ease-out forwards; z-index: 999;
}

/* --- 2. HEADER --- */
header { position: relative; z-index: 500; height: 60px; }
.header-content { position: relative; justify-content: space-between; display: flex; align-items: center; padding: 0 20px; height: 100%; }
.title-group {
    position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);
    text-align: center; margin: 0;
}
.title-group h1 { font-size: 1.2rem; margin: 0; letter-spacing: 2px; }
.date-display { font-size: 0.8rem; color: #888; }
.compact-header { display: flex; justify-content: space-between; align-items: center; padding: 0 10px; margin-bottom: 10px; }

/* --- 3. CONTAINER DO JOGO --- */
#game-wrapper {
    width: 100vw; height: calc(100vh - 60px);
    display: flex; justify-content: center; align-items: center;
    background: transparent;
}
#game-stage {
    position: relative; aspect-ratio: 16 / 9; width: 100%;
    max-height: 100%; max-width: 177.78vh;
    overflow: hidden; 
}

/* --- 4. MENU & DASHBOARD --- */
.game-layer {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    display: none; flex-direction: column; justify-content: center; align-items: center;
    z-index: 10;
}
.game-layer.active { display: flex; }

#screen-menu {
    background: rgba(0,0,0,0.85); 
    backdrop-filter: blur(5px);
    padding: 20px;
    box-sizing: border-box;
    color: white;

    /* --- HABILITA SCROLL VERTICAL APENAS AQUI --- */
    overflow-y: auto; 
    -webkit-overflow-scrolling: touch; /* Rolagem suave no iOS */
    
    /* Importante: Remove o centro forçado verticalmente para permitir scroll natural se o conteúdo for grande */
    justify-content: flex-start; 
}

/* Personalização da barra de rolagem do Menu (Opcional, para ficar bonito) */
#screen-menu::-webkit-scrollbar { width: 6px; }
#screen-menu::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
#screen-menu::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }

/* Garante que o conteúdo centralize se sobrar espaço (estética), mas role se faltar */
.menu-grid-container {
    width: 100%; 
    max-width: 800px; 
    /* Margem automática vertical centraliza visualmente quando não há scroll */
    margin: auto 0; 
    
    display: flex; 
    flex-direction: column;
    gap: 15px;
    
    /* Garante altura mínima para o scroll funcionar bem */
    min-height: min-content; 
    padding-bottom: 20px; /* Espaço extra no final para não colar no dedo */
}

/* BOTÕES FLUTUANTES (Mobile Landscape) */
.float-btn-group {
    position: absolute; top: 15px; left: 15px;
    display: none; /* Escondido por padrão, aparece no @media */
    gap: 10px; z-index: 60;
}
.float-home-btn {
    width: 40px; height: 40px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white; border-radius: 50%; background: rgba(0,0,0,0.5);
    display: flex; justify-content: center; align-items: center;
    transition: transform 0.2s;
}
.float-home-btn:hover { background: rgba(255,255,255,0.1); transform: scale(1.1); }
.float-home-btn img { width: 40px; height: 40px; object-fit: contain; filter: drop-shadow(0 2px 5px rgba(0,0,0,0.8)); }

/* Grid Dashboard */
.menu-grid-container {
    width: 100%; max-width: 800px; height: 100%;
    display: flex; flex-direction: column; gap: 15px;
}

/* A. RANKING GLOBAL (Visual Horizontal) */
#global-podium-section {
    flex: 0 0 auto;
    text-align: left; /* Alinha título a esquerda se quiser, ou center */
    padding-bottom: 5px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    overflow: hidden; /* Garante que não quebre o layout pai */
}

/* Container Rolável */
#podium-container {
    display: flex;
    justify-content: flex-start; /* Itens começam da esquerda */
    align-items: center;
    gap: 12px;
    height: 110px; /* Altura fixa para o card */
    overflow-x: auto; /* Permite rolagem lateral */
    padding: 5px 0 10px 0; /* Espaço para scrollbar não colar */
    scroll-behavior: smooth;
    
    /* Esconde Scrollbar no Firefox/IE */
    scrollbar-width: thin; 
    scrollbar-color: rgba(255,255,255,0.2) transparent;
}

/* Estilo da Scrollbar (Chrome/Safari) */
#podium-container::-webkit-scrollbar { height: 4px; }
#podium-container::-webkit-scrollbar-track { background: transparent; }
#podium-container::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }

/* O Card do Jogador */
.podium-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    min-width: 85px; /* Largura fixa para manter padrão */
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.05);
    border-radius: 8px;
    padding: 8px 4px;
    flex-shrink: 0; /* Impede que esmaguem */
}

/* Tipografia e Cores */
.rank-badge { font-size: 1rem; font-weight: 900; line-height: 1; margin-bottom: 5px; }
.podium-avatar { width: 42px; height: 42px; border-radius: 50%; object-fit: cover; border: 2px solid #333; margin-bottom: 4px; }
.podium-nick { font-size: 0.75rem; max-width: 75px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: #ddd; }
.podium-pts { font-size: 0.8rem; font-weight: bold; color: #fff; margin-top: 2px; }
.podium-pts small { font-size: 0.6rem; color: #888; font-weight: normal; margin-left: 2px; }

/* Cores Específicas por Posição */
.rank-1 .rank-badge { color: #facc15; text-shadow: 0 0 10px rgba(250,204,21,0.4); }
.rank-1 .podium-avatar { border-color: #facc15; box-shadow: 0 0 8px rgba(250,204,21,0.2); }

.rank-2 .rank-badge { color: #e2e8f0; text-shadow: 0 0 8px rgba(226,232,240,0.3); }
.rank-2 .podium-avatar { border-color: #e2e8f0; }

.rank-3 .rank-badge { color: #cd7f32; text-shadow: 0 0 8px rgba(205,127,50,0.3); }
.rank-3 .podium-avatar { border-color: #cd7f32; }

.rank-other .rank-badge { color: #666; }
.rank-other .podium-avatar { border-color: #444; filter: grayscale(100%); }

/* Dashboard Player */
#player-dashboard {
    flex: 0 0 auto; background: rgba(255,255,255,0.05);
    border-radius: 12px; padding: 10px 20px;
    display: flex; align-items: center; justify-content: space-between;
    margin: 10px;
}
.dash-left { display: flex; align-items: center; gap: 15px; flex: 1; }
#dash-avatar { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 2px solid var(--orka-accent, #facc15); }
.user-info { display: flex; flex-direction: column; gap: 4px; }
#dash-nick { font-size: 1.2rem; font-weight: bold; color: #fff; }
.global-pts-badge { background: var(--orka-accent, #facc15); color: #000; font-size: 0.7rem; padding: 2px 6px; border-radius: 4px; font-weight: bold; align-self: flex-start; }
.dash-divider { width: 1px; height: 40px; background: rgba(255,255,255,0.1); margin: 0 20px; }
.dash-right { display: flex; gap: 20px; text-align: right; }
.stat-box { display: flex; flex-direction: column; }
.stat-box small { font-size: 0.65rem; color: #888; letter-spacing: 1px; }
.stat-box span { font-size: 1.1rem; font-weight: bold; color: #fff; font-family: monospace; }
#dash-best-today { color: #facc15; }

/* Scroll Ranking */
#daily-ranking-section { flex: 1; min-height: 0; display: flex; flex-direction: column; }
#daily-scroll-box { background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; flex: 1; overflow-y: auto; padding: 5px; }
.ranking-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 10px; border-bottom: 1px solid rgba(255,255,255,0.05); font-family: monospace; font-size: 0.9rem; }
.ranking-row:last-child { border-bottom: none; }
.rank-left { display: flex; align-items: center; gap: 10px; overflow: hidden; }
.rank-pos { width: 20px; font-weight: bold; color: #666; }
.rank-avatar { width: 24px; height: 24px; border-radius: 50%; object-fit: cover; }
.rank-name { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 120px; }
.rank-score { color: #ccc; }
.ranking-row.is-me { background: rgba(250, 204, 21, 0.1); border-left: 2px solid #facc15; }

/* Ações */
#menu-actions { flex: 0 0 auto; display: flex; justify-content: center; gap: 10px; margin-top: 5px; }
.big-play-btn { flex-grow: 1; max-width: 300px; padding: 12px; font-size: 1.1rem; border-radius: 8px; font-weight: bold; background: #fff; color: #000; border: none; cursor: pointer; transition: transform 0.2s; }
.big-play-btn:active { transform: scale(0.98); }
.icon-only-btn { width: 48px; height: 48px; border-radius: 8px; display: flex; justify-content: center; align-items: center; background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.2); cursor: pointer; }

/* --- 5. HUD & TARGETS --- */
#countdown-text { font-size: 15vw; font-weight: 900; color: #facc15; text-shadow: 0 0 20px rgba(250, 204, 21, 0.5); }
#timer-hud { position: absolute; top: 2%; right: 2%; font-size: 3vw; font-weight: bold; color: #fff; text-shadow: 2px 2px 0 #000; font-family: monospace; pointer-events: none; }
#wave-hud { position: absolute; top: 2%; left: 2%; font-size: 2vw; font-weight: bold; color: rgba(255,255,255,0.9); text-shadow: 1px 1px 0 #000; pointer-events: none; }
#targets-container { width: 100%; height: 100%; pointer-events: none; }

.target {
    position: absolute; width: 5.6%; aspect-ratio: 1/1; border-radius: 50%;
    background: #ef4444; border: 0.25vw solid white; box-shadow: 0 4px 15px rgba(0,0,0,0.4);
    z-index: 100; pointer-events: auto; 
    transform: translate(-50%, -50%); /* Centraliza */
    
    /* ANIMAÇÃO DE POP RESTAURADA (Mais "seca" e rápida) */
    animation: popInTarget 0.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; 
}
.target::after { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60%; height: 60%; background: white; border-radius: 50%; pointer-events: none; }
.target::before { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 30%; height: 30%; background: #ef4444; border-radius: 50%; pointer-events: none; z-index: 2; }
.target.armored { background: #3b82f6; border-color: #93c5fd; }
.target.armored::before { background: #3b82f6; }
.target.moving { animation-timing-function: ease-in-out; animation-direction: alternate; animation-iteration-count: infinite; }

#miss-click-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: auto; }

/* Efeitos */
.perfect-flash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(132, 204, 22, 0.4); pointer-events: none; z-index: 500; animation: flash 0.2s linear; }
.penalty-flash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 0, 0, 0.4); pointer-events: none; z-index: 500; animation: flash 0.15s linear; }
@keyframes flash { 0% { opacity: 1; } 100% { opacity: 0; } }
@keyframes splatEnter { 0% { transform: translate(-50%, -50%) scale(0); opacity: 0.5; } 50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.8; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; } }
@keyframes rippleAnim { 0% { width: 0px; height: 0px; opacity: 1; border-width: 5px; } 100% { width: 100px; height: 100px; opacity: 0; border-width: 0px; } }

/* NOVA ANIMAÇÃO DE POP (Target) */
@keyframes popInTarget { 
    from { transform: translate(-50%, -50%) scale(0); } 
    to { transform: translate(-50%, -50%) scale(1); } 
}

/* Modais 
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.8); display: none;
    justify-content: center; align-items: center; z-index: 2000;
}
.modal-overlay.active { display: flex; }
.modal-content {
    background: #1a1a1a; padding: 20px; border-radius: 10px; border: 1px solid #333;
    text-align: center; color: #fff; max-width: 90%;
}*/
#toast-container { bottom: 20px !important; pointer-events: none; }
.orka-toast { pointer-events: none; background: #333; color: white; padding: 10px 20px; border-radius: 5px; margin-top: 10px; }

/* AVISO DE ROTAÇÃO */
#rotate-warning {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #000; z-index: 9999;
    display: none; /* Escondido por padrão */
    flex-direction: column; justify-content: center; align-items: center;
    color: #facc15; text-align: center; font-family: sans-serif;
}

/* MOBILE QUERIES */

/* Portrait: Mostra o aviso e esconde TUDO */
@media screen and (max-width: 900px) and (orientation: portrait) {
    #rotate-warning { display: flex !important; } /* Força display */
    #game-wrapper, header { display: none !important; }
}

/* Landscape (Celular): Esconde Header e mostra Botões Flutuantes */
@media screen and (max-height: 600px) and (orientation: landscape) {
    /*header { display: none !important; }
    #game-wrapper { height: 100vh; }
    
    /* Mostra os botões flutuantes 
    .float-btn-group { display: flex; } */
    
    #screen-menu { padding: 10px; }
    .menu-grid-container { gap: 10px; }
    #global-podium-section { height: 130px; }
    #podium-container { height: 120px; }
    .big-play-btn { font-size: 1rem; padding: 8px; }
    .target { width: 6.6%; }
}

.game-toolbar.hidden {
    opacity: 0;
    transform: translateY(-20px);
    pointer-events: none; /* Garante que o usuário não clique nela sem querer */
}

/* Esconde o cursor padrão no palco do jogo */
#game-stage {
    cursor: none;
}

#custom-cursor {
    width: 30px;
    height: 30px;
    border: 2px solid #facc15;
    border-radius: 50%;
    position: fixed;
    pointer-events: none; /* Importante para não interceptar cliques */
    z-index: 10000;
    transform: translate(-50%, -50%);
    display: none; /* Escondido por padrão (ex: mobile) */
    mix-blend-mode: difference;
}

#custom-cursor::after {
    content: '';
    position: absolute;
    top: 50%; left: 50%;
    width: 4px; height: 4px;
    background: #facc15;
    border-radius: 50%;
    transform: translate(-50%, -50%);
}

/* Só exibe se for um dispositivo com ponteiro (PC) */
@media (pointer: fine) {
    #custom-cursor { display: block; }
}